/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java project to get you started.
 * For more details take a look at the Java Quickstart chapter in the Gradle
 * User Manual available at https://docs.gradle.org/5.2.1/userguide/tutorial_java_projects.html
 */

import io.franzbecker.gradle.lombok.task.DelombokTask

plugins {
    // Apply the java plugin to add support for Java
    id 'java'

    // Apply the application plugin to add support for building an application
    id 'application'

    id "io.franzbecker.gradle-lombok" version "1.14"
}

lombok {
    version = '1.18.4'
    sha256 = ""
}

task delombok(type: DelombokTask, dependsOn: compileJava) {
    ext.outputDir = file("$buildDir/delombok")
    outputs.dir(outputDir)
    sourceSets.main.java.srcDirs.each {
        inputs.dir(it)
        //noinspection GroovyAssignabilityCheck
        args(it, "-d", outputDir)
    }
    doFirst {
        outputDir.deleteDir()
    }
}

javadoc {
    dependsOn delombok
    source = delombok.outputDir
    failOnError = false
}


repositories {
    // Use jcenter for resolving your dependencies.
    // You can declare any Maven/Ivy/file repository here.
    jcenter()
}

sourceCompatibility = 11
targetCompatibility = 11

dependencies {
    def versions = [
            aws: "2.2.0",
            jackson: "2.9.6",
            jupiter: "5.3.2"
    ]

    implementation 'io.reactivex.rxjava2:rxjava:2.2.7'

    // This dependency is found on compile classpath of this component and consumers.
    implementation 'com.google.guava:guava:27.0.1-jre'

    // Use JUnit test framework
    testCompile        group: 'org.junit.jupiter',      name: 'junit-jupiter-api',    version: versions.jupiter
    testImplementation group: 'org.junit.jupiter',      name: 'junit-jupiter-api',    version: versions.jupiter
    testRuntime        group: 'org.junit.jupiter',      name: 'junit-jupiter-engine', version: versions.jupiter
    testCompile        group: 'org.assertj',            name: 'assertj-core',         version: "3.11.1"
    testCompile        group: 'org.mockito',            name: 'mockito-core',         version: "2.21.0"
}

// Define the main class for the application
mainClassName = 'cpk.App'

repositories {
    // Use jcenter for resolving your dependencies.
    // You can declare any Maven/Ivy/file repository here.

    mavenCentral()

    maven {
        url "https://plugins.gradle.org/m2/"
    }
}

apply plugin: "io.franzbecker.gradle-lombok"
